// Intravenous Newsletter Component Styles
// Uses scoped CSS variables with fallbacks so designers can override selectively.
// All variables are prefixed with `iv-newsletter-*`.

.iv-newsletter {
	/* Dimensional & layout vars */
	--iv-newsletter-max-width: var(--iv-newsletter-max-width, 540px);
	--iv-newsletter-padding: var(--iv-newsletter-padding, 1.75rem 1.75rem 2.25rem);
	--iv-newsletter-gap: var(--iv-newsletter-gap, 1.25rem);
	--iv-newsletter-row-gap: var(--iv-newsletter-row-gap, .75rem);
	--iv-newsletter-border-radius: var(--iv-newsletter-border-radius, 0.75rem);
	--iv-newsletter-border-color: var(--iv-newsletter-border-color, rgba(0,0,0,0.08));
	--iv-newsletter-border-width: var(--iv-newsletter-border-width, 1px);
	--iv-newsletter-shadow: var(--iv-newsletter-shadow, 0 4px 18px -2px rgba(0,0,0,0.12));

	/* Color & background vars */
	--iv-newsletter-bg: var(--iv-newsletter-bg, #ffffff);
	--iv-newsletter-cover-overlay: var(--iv-newsletter-cover-overlay, linear-gradient(to bottom, rgba(0,0,0,0.35), rgba(0,0,0,0.6)));
	--iv-newsletter-title-color: var(--iv-newsletter-title-color, #111111);
	--iv-newsletter-description-color: var(--iv-newsletter-description-color, #444444);
	--iv-newsletter-feedback-success-color: var(--iv-newsletter-feedback-success-color, #0A7A3B);
	--iv-newsletter-feedback-error-color: var(--iv-newsletter-feedback-error-color, #B00020);

	/* Typography vars */
	--iv-newsletter-title-font-size: var(--iv-newsletter-title-font-size, 1.5rem);
	--iv-newsletter-title-font-weight: var(--iv-newsletter-title-font-weight, 600);
	--iv-newsletter-description-font-size: var(--iv-newsletter-description-font-size, .95rem);
	--iv-newsletter-description-line-height: var(--iv-newsletter-description-line-height, 1.5);

	/* Form vars */
	--iv-newsletter-input-bg: var(--iv-newsletter-input-bg, #ffffff);
	--iv-newsletter-input-color: var(--iv-newsletter-input-color, #222222);
	--iv-newsletter-input-border-color: var(--iv-newsletter-input-border-color, rgba(0,0,0,0.25));
	--iv-newsletter-input-border-radius: var(--iv-newsletter-input-border-radius, 0.5rem);
	--iv-newsletter-input-padding: var(--iv-newsletter-input-padding, 0.75rem 0.9rem);
	--iv-newsletter-input-focus-ring: var(--iv-newsletter-input-focus-ring, #2684FF);
	--iv-newsletter-button-bg: var(--iv-newsletter-button-bg, #111111);
	--iv-newsletter-button-color: var(--iv-newsletter-button-color, #ffffff);
	--iv-newsletter-button-hover-bg: var(--iv-newsletter-button-hover-bg, #333333);
	--iv-newsletter-button-disabled-opacity: var(--iv-newsletter-button-disabled-opacity, .55);
	--iv-newsletter-button-padding: var(--iv-newsletter-button-padding, 0.75rem 1.1rem);
	--iv-newsletter-button-border-radius: var(--iv-newsletter-button-border-radius, 0.5rem);
	--iv-newsletter-row-stack-gap: var(--iv-newsletter-row-stack-gap, .65rem);

	/* Transitions */
	--iv-newsletter-transition-speed: var(--iv-newsletter-transition-speed, .3s);
	--iv-newsletter-ease: var(--iv-newsletter-ease, cubic-bezier(.4,.2,.2,1));

	width: 100%;
	max-width: var(--iv-newsletter-max-width);
	padding: var(--iv-newsletter-padding);
	box-sizing: border-box;
	background: var(--iv-newsletter-bg);
	border: var(--iv-newsletter-border-width) solid var(--iv-newsletter-border-color);
	border-radius: var(--iv-newsletter-border-radius);
	box-shadow: var(--iv-newsletter-shadow);
	display: flex;
	flex-direction: column;
	gap: var(--iv-newsletter-gap);
	position: relative;
	overflow: hidden;
}

/* Cover image mode: image fills component, content overlays */
.iv-newsletter .iv-newsletter-image.iv-newsletter-image-cover {
	position: absolute;
	inset: 0;
	width: 100%;
	height: 100%;
	object-fit: cover;
	object-position: top left; /* top -> bottom left -> right base per requirements */
	z-index: 0;
}

.iv-newsletter.status-success { --iv-newsletter-title-color: var(--iv-newsletter-title-color-success, #0A7A3B); }
.iv-newsletter.status-error { --iv-newsletter-title-color: var(--iv-newsletter-title-color-error, #B00020); }

/* Overlay gradient for cover mode */
.iv-newsletter .iv-newsletter-image.iv-newsletter-image-cover + .iv-newsletter-header,
.iv-newsletter .iv-newsletter-image.iv-newsletter-image-cover + .iv-newsletter-header + .iv-newsletter-form,
.iv-newsletter .iv-newsletter-image.iv-newsletter-image-cover ~ .iv-newsletter-form-feedback {
	position: relative;
	z-index: 1;
}

.iv-newsletter .iv-newsletter-image.iv-newsletter-image-cover::after { content: none; }

/* Create overlay via pseudo on container */
.iv-newsletter:has(.iv-newsletter-image-cover)::before {
	content: "";
	position: absolute;
	inset: 0;
	background: var(--iv-newsletter-cover-overlay);
	z-index: 0;
	pointer-events: none;
}

/* Top image mode: image just sits above header content */
.iv-newsletter .iv-newsletter-image.iv-newsletter-image-top {
	width: 100%;
	display: block;
	object-fit: cover;
	object-position: top left;
	border-radius: calc(var(--iv-newsletter-border-radius) - 2px);
	margin-bottom: .5rem;
	height: auto; /* height overridden via inline style if provided */
}

/* Header */
.iv-newsletter-header {
	display: flex;
	flex-direction: column;
	gap: .5rem;
	position: relative;
	z-index: 1;
}

.iv-newsletter-title {
	margin: 0;
	font-size: var(--iv-newsletter-title-font-size);
	font-weight: var(--iv-newsletter-title-font-weight);
	color: var(--iv-newsletter-title-color);
	line-height: 1.25;
}

.iv-newsletter-description {
	margin: 0;
	font-size: var(--iv-newsletter-description-font-size);
	line-height: var(--iv-newsletter-description-line-height);
	color: var(--iv-newsletter-description-color);
}

/* Form */
.iv-newsletter-form {
	display: flex;
	flex-direction: column;
	gap: var(--iv-newsletter-row-gap);
}

.iv-newsletter-form-label {
	font-size: .8rem;
	font-weight: 600;
	letter-spacing: .5px;
	text-transform: uppercase;
	color: var(--iv-newsletter-description-color);
}

.iv-newsletter-form-row {
	display: flex;
	align-items: stretch;
	gap: .5rem;
}

.iv-newsletter-form-row--stacked { flex-direction: column; gap: var(--iv-newsletter-row-stack-gap); }

.iv-newsletter-form-input {
	flex: 1 1 auto;
	background: var(--iv-newsletter-input-bg);
	color: var(--iv-newsletter-input-color);
	padding: var(--iv-newsletter-input-padding);
	border: 1px solid var(--iv-newsletter-input-border-color);
	border-radius: var(--iv-newsletter-input-border-radius);
	font-size: .95rem;
	line-height: 1.2;
	outline: none;
	transition: border-color var(--iv-newsletter-transition-speed) var(--iv-newsletter-ease),
							box-shadow var(--iv-newsletter-transition-speed) var(--iv-newsletter-ease);
}

.iv-newsletter-form-input:focus-visible {
	border-color: var(--iv-newsletter-input-focus-ring);
	box-shadow: 0 0 0 3px color-mix(in srgb, var(--iv-newsletter-input-focus-ring) 55%, transparent);
}

.iv-newsletter-form-button {
	background: var(--iv-newsletter-button-bg);
	color: var(--iv-newsletter-button-color);
	border: none;
	padding: var(--iv-newsletter-button-padding);
	border-radius: var(--iv-newsletter-button-border-radius);
	font-size: .95rem;
	font-weight: 600;
	cursor: pointer;
	transition: background var(--iv-newsletter-transition-speed) var(--iv-newsletter-ease),
							opacity var(--iv-newsletter-transition-speed) var(--iv-newsletter-ease);
	display: inline-flex;
	align-items: center;
	justify-content: center;
	min-width: 7rem;
}

.iv-newsletter-form-button:hover { background: var(--iv-newsletter-button-hover-bg); }
.iv-newsletter-form-button:disabled { opacity: var(--iv-newsletter-button-disabled-opacity); cursor: not-allowed; }

/* Feedback */
.iv-newsletter-form-feedback {
	font-size: .85rem;
	margin: .25rem 0 0;
	color: var(--iv-newsletter-description-color);
	position: relative;
	z-index: 1;
}

.iv-newsletter.status-success .iv-newsletter-form-feedback { color: var(--iv-newsletter-feedback-success-color); }
.iv-newsletter.status-error .iv-newsletter-form-feedback { color: var(--iv-newsletter-feedback-error-color); }

/* Spinner spacing */
.iv-newsletter.iv-newsletter-with-spinner iv-spinner { margin-top: .75rem; }

/* Responsive adjustments */
@media (max-width: 640px) {
	.iv-newsletter { --iv-newsletter-padding: var(--iv-newsletter-padding-mobile, 1.25rem 1.25rem 1.75rem); }
	.iv-newsletter-title { font-size: calc(var(--iv-newsletter-title-font-size) - .25rem); }
	.iv-newsletter-form-row { flex-direction: column; }
	.iv-newsletter-form-button { width: 100%; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
	.iv-newsletter-form-input, .iv-newsletter-form-button { transition: none; }
}

/* High contrast mode accessibility */
@media (forced-colors: active) {
	.iv-newsletter-form-input:focus-visible { outline: 2px solid Highlight; box-shadow: none; }
	.iv-newsletter-form-button { border: 1px solid ButtonText; }
}

/* Dark scheme optional tweaks */
@media (prefers-color-scheme: dark) {
	.iv-newsletter {
		--iv-newsletter-bg: var(--iv-newsletter-bg-dark, #1d1f21);
		--iv-newsletter-border-color: var(--iv-newsletter-border-color-dark, rgba(255,255,255,0.12));
		--iv-newsletter-title-color: var(--iv-newsletter-title-color-dark, #f9f9f9);
		--iv-newsletter-description-color: var(--iv-newsletter-description-color-dark, #c4c8cc);
		--iv-newsletter-input-bg: var(--iv-newsletter-input-bg-dark, #2b2e31);
		--iv-newsletter-input-color: var(--iv-newsletter-input-color-dark, #f9f9f9);
		--iv-newsletter-input-border-color: var(--iv-newsletter-input-border-color-dark, rgba(255,255,255,0.3));
		--iv-newsletter-button-bg: var(--iv-newsletter-button-bg-dark, #f9f9f9);
		--iv-newsletter-button-color: var(--iv-newsletter-button-color-dark, #111111);
		--iv-newsletter-button-hover-bg: var(--iv-newsletter-button-hover-bg-dark, #dcdcdc);
	}
}
